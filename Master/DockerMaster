FROM alpine:3.6
MAINTAINER ThejanW
RUN apk add --no-cache python3 && \
    python3 -m ensurepip && \
    git && \
    rm -r /usr/lib/python*/ensurepip && \
    pip3 install --upgrade pip setuptools && \
    rm -r /root/.cache
#install python dependencies
RUN pip3 install flask flask_socketio docker
# Download server related source files
WORKDIR /usr/share/
RUN apk add --no-cache --virtual .bootstrap-deps wget ca-certificates && \
    git clone https://github.com/ThejanW/Docker-Service-Manager.git && \
    chmod +x Docker-Service-Manager/Master/gui_api.py && \
    apk del .bootstrap-deps
WORKDIR /
# In case we need to change the DOCKER_HOST
# ENV DOCKER_HOST unix:///tmp/docker.sock
# Add symbolic link to app1.py
RUN ln -s /usr/share/Docker-Service-Manager/Master/gui_api.py /usr/bin/gui_api
# expose API port, this is the default port
EXPOSE 8765
CMD gui_api